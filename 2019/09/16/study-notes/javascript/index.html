<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="Java, ASP.NET, C++">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    JavaScript 学习笔记 |
    
    David&#39;s Blog</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="outer">
  

<article id="post-study-notes/javascript" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      JavaScript 学习笔记
    </h1>
  
  




      </header>
    

    
      <div class="article-meta">
        <a href="/2019/09/16/study-notes/javascript/" class="article-date">
  <time datetime="2019-09-16T15:50:29.000Z" itemprop="datePublished">2019-09-16</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/Study-Notes/">Study Notes</a> / <a class="article-category-link" href="/categories/Study-Notes/JavaScript/">JavaScript</a>
  </div>

      </div>
    

    
      
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
        <h2 id="JavaScript-布局"><a href="#JavaScript-布局" class="headerlink" title="JavaScript 布局"></a>JavaScript 布局</h2><ul>
<li><p>通常 JavaScript 代码可以放到 <code>&lt;head&gt; &lt;/head&gt;</code> 中；</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">            alert(<span class="string">'Hello World'</span>);</span><br><span class="line">        &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>type</code> 默认属性即为：<code>JavaScript</code>, 所以可以不必显示指定。</p>
</blockquote>
</li>
<li><p>将 JavaScript 代码放到单独的 <code>.js</code> 文件中；</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;script src=<span class="string">"/static/js/abc.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    &lt;<span class="regexp">/head&gt;</span></span><br><span class="line"><span class="regexp">    &lt;body&gt;</span></span><br><span class="line"><span class="regexp">        ...</span></span><br><span class="line"><span class="regexp">    &lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<a id="more"></a>
<h2 id="JavaScript-基础"><a href="#JavaScript-基础" class="headerlink" title="JavaScript 基础"></a>JavaScript 基础</h2><h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p><code>==</code> ： 自动转换数据类型在比较；<br><code>===</code> ： 如果数据类型不一致，返回 <code>false</code>；</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>使用 `xxxxxxx` 标识多行字符串：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">`Hello</span></span><br><span class="line"><span class="string">World</span></span><br><span class="line"><span class="string">!`</span>);</span><br></pre></td></tr></table></figure>

<p>可以用 <code>{$variable}</code> 替换字符串中的变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'Bob'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>, you are <span class="subst">$&#123;age&#125;</span> years old!`</span>);</span><br></pre></td></tr></table></figure>

<p>对字符串的操作本身不会改变自身，而是返回一个新的字符串；</p>
<p><code>str.toUpperCase()</code> - 转变为大写<br><code>str.toLowerCase()</code> - 转变为小写<br><code>str.indexOf(&#39;string&#39;)</code> - 获取指定字符串出现的位置<br><code>str.substring(startIndex, length)</code> - 获取截取的字符串</p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>通过索引进行赋值可以直接修改这个 Array：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">100</span>;</span><br><span class="line">arr; <span class="comment">//arr now is ['A', 100, 'C'];</span></span><br></pre></td></tr></table></figure>

<p><code>indexOf(value)</code> - 搜索指定值的索引；<br><code>slice(startIndex, length)</code> - 类似于 String 的 <code>substring()</code>；<br><code>push(&#39;value1&#39;, &#39;value2&#39;)</code> - 末尾添加值；<br><code>pop()</code> - 删除最有一个值；<br><code>sort()</code> - 排序；<br><code>reverse()</code> - 反转数组；<br><code>splice(startIndex, deleteNum, replaceValue1, replaceValue2)</code> - 从指定的索引开始删除若干值，然后再从该位置添加若干值；<br><code>concat(newArray)</code> - 连接两个 Array;<br><code>join(connectValue)</code> - 每个值用指定的字符串连接，返回一个连接后的字符串</p>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>JavaScript 对象是动态类型，可以添加或删除属性;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'David'</span>,</span><br><span class="line">    age: <span class="string">'20'</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.gender = <span class="string">'male'</span>; <span class="comment">// 新增 gender 属性</span></span><br><span class="line"><span class="keyword">delete</span> person.age; <span class="comment">// 删除 age 属性</span></span><br></pre></td></tr></table></figure>

<p>使用 <code>in</code>/<code>hasOwnProperty()</code> 检测是否拥有某属性：</p>
<p><code>in</code> - 包括继承的属性, 例如： <code>toString</code> 是 <code>object</code> 对象的属性，结果也是 <code>true</code>;<br><code>hasOwnProperty()</code> - 必须是自身拥有的属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'age'</span> <span class="keyword">in</span> person; <span class="comment">//true</span></span><br><span class="line"><span class="string">'birth'</span> <span class="keyword">in</span> person; <span class="comment">//false</span></span><br><span class="line">person.hasOwnProperty(<span class="string">'age'</span>); <span class="comment">//true</span></span><br><span class="line">person.hasOwnProperty(<span class="string">'toString'</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><ul>
<li><code>for(i=index; i&lt;length; i++)</code>;</li>
<li><code>for (var key in object)</code>;</li>
<li><code>while(condition)</code>;</li>
<li><code>do {...} while(condition)</code>;</li>
</ul>
<h3 id="Map-amp-Set"><a href="#Map-amp-Set" class="headerlink" title="Map &amp; Set"></a>Map &amp; Set</h3><p><code>Map</code> - 键值对集合；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">'David'</span>, <span class="number">100</span>], [<span class="string">'Bob'</span>, <span class="number">10</span>]]);</span><br><span class="line">m.get(<span class="string">'David'</span>); <span class="comment">//100</span></span><br><span class="line">m.set(<span class="string">'Adam'</span>, <span class="number">99</span>); <span class="comment">//添加新的 key-value</span></span><br><span class="line">m.has(<span class="string">'Bob'</span>); <span class="comment">//true</span></span><br><span class="line">m.delete(<span class="string">'Adam'</span>) <span class="comment">//删除 key-'Adam'</span></span><br></pre></td></tr></table></figure>

<p><code>Set</code> - Key 的集合，Key 不能重复，没有索引；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="string">'3'</span>]);</span><br><span class="line">s.add(<span class="number">4</span>); <span class="comment">// Set &#123;1, 2, 3, '3', 4&#125;</span></span><br><span class="line">s.delete(<span class="number">3</span>); <span class="comment">// Set &#123;1, 2, '3', 4&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="iterable"><a href="#iterable" class="headerlink" title="iterable"></a>iterable</h3><p>新的 <code>iterable</code> 类型，<code>Array</code>、<code>Map</code> 和 <code>Set</code> 都属于 <code>iterable</code> 类型。</p>
<p><code>for ... of</code> 循环 解决 <code>for ... in</code> 循环的历史遗留问题:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>];</span><br><span class="line">a.name = <span class="string">'David'</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> a) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i); <span class="comment">// '0', '1', '2', 'name'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">of</span> a) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i); <span class="comment">// 'A', 'B', 'C'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">element, index, array</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// element: 指向当前元素的值；</span></span><br><span class="line">    <span class="comment">// index：指向当前索引；</span></span><br><span class="line">    <span class="comment">// array：指向 Array 对象本身</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>2 种定义方法：</p>
<ul>
<li><code>function abs(x) { ... }</code></li>
<li><code>var abs = function(x) { ... };</code></li>
</ul>
<p>参数：</p>
<ul>
<li><code>arguments</code> - 用于函数内部，指向传入的所有参数</li>
<li><code>...rest</code> - 指向传入的未显示指定的参数 <code>function foo(a, b, ...rest){ ... }</code></li>
</ul>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>JavaScript 默认有一个全局对象 <code>window</code>，任何全局变量（函数也视为变量）都会绑定到 <code>window</code> 上。</p>
<p><code>var</code> - 定义<strong>局部</strong>作用域变量<br><code>let</code> - 定于<strong>块</strong>级作用域变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">    i += <span class="number">100</span>; <span class="comment">// SyntaxError;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">    i += <span class="number">100</span>; <span class="comment">// 仍然可以引用变量i</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>const</code> - 常量</p>
<h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><p>可以同时赋值多个变量，包括嵌套的数组：</p>
<p><code>let [x, [y, z]] = [&#39;hello&#39;, [&#39;hi&#39;, &#39;welcome&#39;]];</code></p>
<p>对象赋值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name: <span class="string">'David'</span>,</span><br><span class="line">    age: <span class="number">20</span>,</span><br><span class="line">    gender: <span class="string">'male'</span>,</span><br><span class="line">    passport: <span class="string">'G-12345678'</span>,</span><br><span class="line">    address: &#123;</span><br><span class="line">        city: <span class="string">'Beijing'</span>,</span><br><span class="line">        zipcode: <span class="string">'100001'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> &#123;name, <span class="attr">address</span>: &#123;city, zip&#125;&#125; = person;</span><br><span class="line">name; <span class="comment">// 'David'</span></span><br><span class="line">city; <span class="comment">// 'Beijing'</span></span><br><span class="line">zip; <span class="comment">// undefined, 因为属性名是zipcode而不是zip</span></span><br><span class="line"><span class="comment">// 注意: address不是变量，而是为了让city和zip获得嵌套的address对象的属性:</span></span><br><span class="line">address; <span class="comment">// Uncaught ReferenceError: address is not defined</span></span><br></pre></td></tr></table></figure>

<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><p>可以将函数作为参数传入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y, abs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> abs(x) + abs(y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="map-方法"><a href="#map-方法" class="headerlink" title="map 方法"></a>map 方法</h3><p><code>arr.map(function (x) { return abs(x); } )</code> - 依次对数组的每个元素调用指定的函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pow</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.map(pow); <span class="comment">// [2, 4, 9, 16, 25]</span></span><br><span class="line"></span><br><span class="line">arr.map(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x * x; &#125;); <span class="comment">// [2, 4, 9, 16, 25]</span></span><br><span class="line"></span><br><span class="line">arr.map(<span class="function"><span class="params">x</span> =&gt;</span> x * x); <span class="comment">// [2, 4, 9, 16, 25]</span></span><br></pre></td></tr></table></figure>

<h3 id="reduce-方法"><a href="#reduce-方法" class="headerlink" title="reduce 方法"></a>reduce 方法</h3><p><code>arr.reduce(function (x, y) { return add(x, y); })</code> - 分别对数组的进行函数调用，依次往后累计：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.reduce( <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123; <span class="keyword">return</span> x + y; &#125;); <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line">arr.reduce( <span class="function">(<span class="params">x,y</span>) =&gt;</span> x * y; ) <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>

<h3 id="filter-方法"><a href="#filter-方法" class="headerlink" title="filter 方法"></a>filter 方法</h3><p><code>arr.filter(function (x) { return x&gt;99 })</code> - 通过返回值决定是否保留该元素</p>
<h3 id="sort-方法"><a href="#sort-方法" class="headerlink" title="sort 方法"></a>sort 方法</h3><p><code>arr.sort()</code> - 默认排序按字符串 ASCII 码进行排序（eg. 10 &lt; 2）</p>
<p><code>arr.sort(function(x,y) { if (x &lt; y) return -1; else if (x &gt; y) return 1; else return 0;})</code> - 修改排序规则则可以按照数字大小进行排序</p>
<p><code>sort</code> 方法直接对当前 Array 进行修改。</p>
<h3 id="every-方法"><a href="#every-方法" class="headerlink" title="every 方法"></a>every 方法</h3><p>判断 Array 中的每个元素是否满足条件</p>
<p><code>let r = arr.every(funciton (s) { return s.length &gt; 0;});</code> - 判断 Array 中是否存在空元素</p>
<h3 id="find-findIndex-方法"><a href="#find-findIndex-方法" class="headerlink" title="find\findIndex 方法"></a>find\findIndex 方法</h3><p>查找 Array 中满足条件的第一个元素\索引</p>
<p><code>let s = arr.find(function (s) { return s.toLowerCase() === s });</code> - 返回第一个小写的元素，如果未找到返回 <code>undefinded</code></p>
<h3 id="foreach-方法"><a href="#foreach-方法" class="headerlink" title="foreach 方法"></a>foreach 方法</h3><p>用于遍历 Array, 没有返回值，也不会改变原 Array, 常用于遍历</p>
<p><code>arr.forEach(console.log)</code></p>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p>将函数作为结果返回。实现一个计数器的示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span> (<span class="params">initial</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> x = initial || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) <span class="title">return</span> <span class="title">x</span> ++;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">var</span> <span class="title">c</span> = <span class="title">conter</span>(<span class="params"><span class="number">100</span></span>);</span></span><br><span class="line"><span class="function"><span class="title">c</span>(<span class="params"></span>); //100</span></span><br><span class="line"><span class="function"><span class="title">c</span>(<span class="params"></span>); //101</span></span><br></pre></td></tr></table></figure>

<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(x, y) =&gt; x * y;</span><br></pre></td></tr></table></figure>

<p>==&gt; 等价于 ==&gt;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="generator-生成器"><a href="#generator-生成器" class="headerlink" title="generator 生成器"></a>generator 生成器</h2><p>类似于在一个函数内可以返回多个结果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">name</span>(<span class="params">max</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(index &lt; max) &#123;</span><br><span class="line">        <span class="keyword">yield</span> index++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> x <span class="keyword">of</span> name()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="标准对象"><a href="#标准对象" class="headerlink" title="标准对象"></a>标准对象</h2><p><code>number</code>, <code>string</code>, <code>boolean</code>, <code>function</code>, <code>underfined</code>, <code>object</code> - (<code>Array</code>, <code>null</code> 均属于 <code>object</code>）</p>
<h3 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h3><p><code>var date = new Date(2019, 6, 12);</code> - 2019/07/12</p>
<p>JavaScript 的 Date 对象月份值从 0 开始，牢记 0=1 月，1=2 月，2=3 月，……，11=12 月。</p>
<h3 id="RegExp"><a href="#RegExp" class="headerlink" title="RegExp"></a>RegExp</h3><h4 id="正则表达式基础"><a href="#正则表达式基础" class="headerlink" title="正则表达式基础"></a>正则表达式基础</h4><p><code>\d</code> - 数字<br><code>\w</code> - 字母或数字<br><code>\s</code> - 空格</p>
<p><code>.</code> - 任意字符<br><code>*</code> - 任意个字符(包括 0 个)<br><code>+</code> - 至少一个字符<br><code>?</code> - 0 或 1 个字符<br><code>{n}</code> - n 个字符<br><code>{n, m}</code> - n~m 个字符</p>
<p><code>[]</code> - 表示范围<br><code>[0-9a-zA-Z]</code> - 数字及字母<br><code>A|B</code> - A 或 B<br><code>^</code> - 以…开头<br><code>$</code> - 以…结尾</p>
<p><code>()</code> - 定义组</p>
<h4 id="RegExp-1"><a href="#RegExp-1" class="headerlink" title="RegExp"></a>RegExp</h4><p><code>test()</code> 方法测试字符串是否符合正则表达式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'^\d&#123;3&#125;\-\d&#123;3-8&#125;$'</span>);</span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^\d&#123;3&#125;\-\d&#123;3-8&#125;$/</span>;</span><br><span class="line"></span><br><span class="line">re.test(<span class="string">'010-12345'</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><code>exec()</code> 方法提取正则表达式中定义的组, 失败返回 null</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$/</span>;</span><br><span class="line">re.exec(<span class="string">'010-12345'</span>); <span class="comment">// ['010-12345', '010', '12345']</span></span><br><span class="line">re.exec(<span class="string">'010 12345'</span>); <span class="comment">// null</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^[0-9a-zA-Z\.]+@.+\.\w+$/</span>; <span class="comment">// 匹配邮箱 v-tawe@microsoft.com</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^\&lt;(.+)\&gt;\s+([0-9a-zA-Z\.]+@.+\.\w+)$/</span>; <span class="comment">// 匹配带名字的邮箱 &lt;David Tang&gt; v-tawe@microsoft.com</span></span><br></pre></td></tr></table></figure>

<h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>序列化 - <code>JSON.parse(&#39;json&#39;)</code><br>反序列化 - <code>JSON.stringify(obj)</code></p>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>两种创建对象的方式：</p>
<p>通过数据类型对象创建：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Student = &#123;</span><br><span class="line">    name: <span class="string">'Robot'</span>;</span><br><span class="line">    height: <span class="number">1.2</span>;</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">'is running'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStudent</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> s = <span class="built_in">Object</span>.create(Student);</span><br><span class="line">    s.name = name;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = createStudent(<span class="string">'xiaoming'</span>);</span><br><span class="line">xiaoming.run(); <span class="comment">//xiaoming is runing</span></span><br></pre></td></tr></table></figure>

<p>通过构造函数实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'Robot'</span>;</span><br><span class="line">    <span class="keyword">this</span>.height  = props.height || <span class="string">'1.2'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">'is running'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Student(props || &#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过 class 实现：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    run() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">'is running'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="原型继承"><a href="#原型继承" class="headerlink" title="原型继承"></a>原型继承</h3><p>定义新的构造函数，并在内部调用继承的构造函数的 <code>call()</code> 方法绑定<code>this</code>;</p>
<!--![inherits](javascript/inherits.png)-->
<img src="/2019/09/16/study-notes/javascript/inherits.png" title="inherits">

<p>只有函数才有 <code>prototype</code> 属性, <code>_proto_</code> 是所有对象都有的（包括函数）, 即对象原型 <code>xxx.constructor</code>。</p>
<p>通过构造函数实现继承：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inherits</span>(<span class="params">Child, Father</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> F = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">    F.prototype = Father.prototype;</span><br><span class="line">    Child.prototype = <span class="keyword">new</span> F();</span><br><span class="line">    Child.prototype.constructor = Child;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'unnamed'</span>;</span><br><span class="line">    <span class="keyword">this</span>.height = props.height || <span class="number">1.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.run = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name + <span class="string">'is running'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrimaryStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    Student.call(<span class="keyword">this</span>, props);</span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">inherits(PrimaryStudent, Student);</span><br><span class="line"></span><br><span class="line">PrimaryStudent.prototype.getGrade = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.grade;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过 class 实现继承：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrimaryStudent</span> <span class="keyword">extends</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getGrade() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.grade;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><p>需要支持 ES6</p>
<ul>
<li>浏览器窗口： <code>windows</code>： <code>windows.innerWidth; windows.innerHeight</code>;</li>
<li>浏览器信息： <code>navigator</code>: <code>navigator.appName; navigator.appVersion</code>…;</li>
<li>屏幕信息： <code>screen</code>: <code>screen.width; screen.height</code>…;</li>
<li>当前页面 URL 信息: <code>location</code>: <code>location.protocol; location.host</code>…;</li>
<li>DOM 对象: <code>document</code>: <code>document.title; document.cookie</code>…;<ul>
<li><code>document.getElementById();</code> - 根据 ID 获取 DOM 节点</li>
<li><code>document.getElementsByTagName();</code> - 根据 Tag 名词获取 DOM 节点</li>
<li><code>document.cookie</code> - 获取 cookie 信息，服务器端使用 <code>httpOnly</code> 可以禁止 JS 读取 Cookie;</li>
</ul>
</li>
<li>浏览器历史： <code>history</code>: <code>history.back(); history.forward();</code> <strong>历史遗留对象已弃用！！</strong></li>
</ul>
<h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="built_in">document</span>.getElementById(<span class="string">'id'</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementsByTagName(<span class="string">'p'</span>);</span><br><span class="line"><span class="built_in">document</span>.getElementsByClassName(<span class="string">'class'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#id'</span>);</span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">'div.class &gt; p'</span>);</span><br><span class="line"></span><br><span class="line">d.children; <span class="comment">// 获取 id 下的所有子节点</span></span><br><span class="line">d.firstElementChild; <span class="comment">// 获取 id 下的第一个子节点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新 DOM</span></span><br><span class="line">d.innerHTML = <span class="string">'ABC &lt;span style="color:red"&gt;RED&lt;/span&gt; XYZ'</span>; <span class="comment">// 可以设置 HTML 标签</span></span><br><span class="line">d.innerText = <span class="string">'ABC XYZ'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//// 设置 CSS</span></span><br><span class="line">d.style.color = <span class="string">'#ff0000'</span>;</span><br><span class="line">d.style.fontSize = <span class="string">'20px'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入 DOM</span></span><br><span class="line"><span class="keyword">var</span> div1 = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span><br><span class="line">div1.id = <span class="string">'div1'</span>;</span><br><span class="line">div1.innerText = <span class="string">'DIV1'</span>;</span><br><span class="line">d.appendChild(div1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ref = <span class="built_in">document</span>.getElementById(<span class="string">'ref'</span>);</span><br><span class="line">d.insertBefore(div1, ref);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除 DOM</span></span><br><span class="line"><span class="keyword">var</span> parent = d.parentElement;</span><br><span class="line"><span class="comment">// 删除节点时 children 节点实时变化</span></span><br><span class="line">parent.removeChild(parent.children[<span class="number">0</span>]); <span class="comment">// 删除节点 0</span></span><br><span class="line">parent.removeChild(parent.children[<span class="number">0</span>]); <span class="comment">// 删除节点 1</span></span><br></pre></td></tr></table></figure>

<h3 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h3><p>没有 <code>name</code> 属性的表单控件不会提交。</p>
<p>表单控件</p>
<ul>
<li><code>&lt;input type=&#39;text&#39;&gt;&lt;/input&gt;</code></li>
<li><code>&lt;input type=&#39;password&#39;&gt;&lt;/input&gt;</code></li>
<li><code>&lt;input type=&#39;radio&#39;&gt;&lt;/input&gt;</code></li>
<li><code>&lt;input type=&#39;checkbox&#39;&gt;&lt;/input&gt;</code></li>
<li><code>&lt;input type=&#39;hidden&#39;&gt;&lt;/input&gt;</code></li>
<li><code>&lt;select&gt;&lt;/select&gt;&lt;/input&gt;</code></li>
</ul>
<p>获取值</p>
<ul>
<li><code>text, password, hidden, select</code> 使用 <code>value</code> 获取值</li>
<li><code>select</code> 使用 <code>checked</code> 获取值</li>
</ul>
<h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><p><code>&lt;input type=&#39;file&#39;&gt;&lt;/input&gt;</code></p>
<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><p>只支持同源策略访问，跨域需要使用 CORS 策略。</p>
<ol>
<li>创建 <code>XMLHttpRequest</code> 对象；</li>
<li>设置 <code>onreadystatechange</code> 回调函数；</li>
<li>通过 <code>readyState === 4</code> 判断请求是否完成；</li>
<li>根据 <code>status === 2000</code> 判断是否成功响应；</li>
<li>调用 <code>open()</code> 方法, 参数1： <code>GET/POST</code>; 参数2： URL 地址； 参数3：是否异步（默认 true);</li>
<li>调用 <code>send()</code> 方法发送请求；</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest(); <span class="comment">// 新建 AJAX 对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态发生变化时，函数被回调</span></span><br><span class="line">request.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123; <span class="comment">// 成功</span></span><br><span class="line">        <span class="comment">// 判断响应结果</span></span><br><span class="line">        <span class="keyword">if</span> (request.status === <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="comment">// 成功，responseText - 响应文本</span></span><br><span class="line">            <span class="keyword">return</span> success(request.responseText);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 失败</span></span><br><span class="line">            <span class="keyword">return</span> fail(request.status);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发送请求</span></span><br><span class="line">request.open(<span class="string">'GET'</span>, <span class="string">'/api/categories'</span>);</span><br><span class="line">request.send();</span><br></pre></td></tr></table></figure>

<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">method, url, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        request.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (request.readyState === <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (request.status === <span class="number">200</span>) &#123;</span><br><span class="line">                    resolve(request.responseText);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    reject(request.status);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    request.open(method, url);</span><br><span class="line">    request.send(data);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = ajax(<span class="string">'GET'</span>, <span class="string">'/api/categories'</span>);</span><br><span class="line">p.then(<span class="function"><span class="keyword">function</span>(<span class="params">text</span>) </span>&#123;</span><br><span class="line">    log.innerText = text;</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">    log.innerText =<span class="string">'ERROR'</span> + status;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>并行执行： <code>Promise.all()</code><br>容错执行： <code>Promise.race()</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// p1, p2 均执行成功后，执行 then</span></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2]).then(<span class="function"><span class="keyword">function</span>(<span class="params">results</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(results);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// p1, p2 同时执行，先执行成功的返回结果给 then，后执行成功的结果丢失</span></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2]).then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="JQuery"><a href="#JQuery" class="headerlink" title="JQuery"></a>JQuery</h2><ul>
<li>按 ID 查找： <code>$(&#39;#id&#39;)</code></li>
<li>按 class 查找： <code>$(&#39;.class&#39;)</code></li>
<li>按 Tag 查找： <code>$(&#39;tag&#39;)</code></li>
<li>按属性查找： <code>$(&#39;[name=email]&#39;)</code>; <code>$(&#39;[type=password]&#39;)</code><ul>
<li><code>$(&#39;[name^=icon])</code>: 查找 name 属性以 icon 开头的 DOM;</li>
<li><code>$(&#39;[name$=with]&#39;)</code>: 查找 name 属性以 with 结尾的 DOM;</li>
</ul>
</li>
<li>组合查找： <code>$(&#39;input[name=email]&#39;)</code>; <code>$(&#39;tr.red&#39;)</code></li>
<li>多项选择器： <code>$(&#39;p, div&#39;)</code>; <code>$(&#39;p.red, p.green&#39;)</code>; <code>$(&#39;input[name=email],[name=password]&#39;)</code></li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><ul>
<li><p>层级选择器 用 空格 隔开： <code>$(&#39;ul li.class&#39;)</code></p>
</li>
<li><p>子选择器 用 &gt; 隔开： <code>$(&#39;ul &gt; li.class&#39;)</code></p>
<p>  层级选择器 和 子选择器的区别在： 子选择器必须时父子关系，不可跨层级选择！</p>
</li>
<li><p>过滤器 用 : 隔开： <code>$(&#39;ul li:first-child&#39;)</code>;  <code>$(&#39;ul li:last-child&#39;)</code>; <code>$(&#39;ul li:nth-child(2)&#39;)</code>; <code>$(&#39;ul li:nth-child(even)&#39;)</code></p>
</li>
</ul>
<h3 id="表单相关"><a href="#表单相关" class="headerlink" title="表单相关"></a>表单相关</h3><ul>
<li><code>:input</code> - <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;button&gt;</code></li>
<li><code>:file</code> - <code>input[type=file]</code></li>
<li><code>:checkbox</code> - <code>input[type=checkbox]</code></li>
<li><code>:radio</code> - <code>input[type=radio]</code></li>
<li><code>:focus</code> - 获取鼠标当前的焦点控件 <code>input:focus</code></li>
<li><code>:checked</code> - 已选择的单选或复选框控件 <code>input[type=radio]:checked</code></li>
<li><code>:enabled</code> - 可以正常输入的控件</li>
<li><code>:disabled</code> - 已被禁用的控件</li>
<li><code>:visible</code> - 可见的控件</li>
<li><code>:hidden</code> - 隐藏的控件</li>
<li>… …</li>
</ul>
<h3 id="查找-amp-过滤"><a href="#查找-amp-过滤" class="headerlink" title="查找 &amp; 过滤"></a>查找 &amp; 过滤</h3><ul>
<li><p><code>find()</code> - 在所有子节点中进行查找</p>
</li>
<li><p><code>parent()</code> - 从当前节点向上查找</p>
</li>
<li><p><code>next()</code> &amp; <code>prev()</code> - 同一层级节点前后进行查找</p>
</li>
<li><p><code>filter()</code> - 过滤掉不符合条件的节点</p>
</li>
<li><p><code>map()</code> - 把一个 jQuery 对象包含的若干 DOM 节点转化为其他对象</p>
</li>
<li><p><code>first()</code> &amp; <code>last()</code> &amp; <code>slice(2, 4)</code> - 截取 jQuery 对象</p>
</li>
</ul>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><ul>
<li><p><code>text()</code> &amp; <code>html()</code> - 获取或修改 text 或 html</p>
</li>
<li><p><code>val()</code> - 获取或修改 value 属性</p>
</li>
<li><p><code>css()</code> - 获取或修改 css</p>
</li>
<li><p><code>hide()</code> &amp; <code>show()</code> - 隐藏或显示元素; 增加参数可以实现淡入淡出效果： <code>hide(&#39;slow&#39;)</code> / <code>show(&#39;slow&#39;)</code></p>
</li>
<li><p><code>attr()</code> &amp; <code>removeAttr()</code> - 修改 DOM 属性</p>
</li>
<li><p><code>prop()</code> - 与 attr() 类似</p>
</li>
<li><p><code>append()</code> &amp; <code>prepend()</code> - 添加 DOM 节点</p>
</li>
<li><p><code>before()</code> &amp; <code>after()</code> - 在当前元素前/后插入 DOM 节点</p>
</li>
<li><p><code>remove()</code> - 删除节点</p>
</li>
</ul>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>绑定事件：</p>
<ul>
<li><code>$(&#39;#id&#39;).on(&#39;click&#39;, function() { alert(&#39;Hello, World&#39;); });</code></li>
<li><code>$(&#39;#id&#39;).click(function() { alert(&#39;Hello, World&#39;); });</code></li>
</ul>
<p>事件类型：</p>
<ul>
<li><p><code>click</code> - 单击</p>
</li>
<li><p><code>dblclick</code> - 双击</p>
</li>
<li><p><code>mouseenter</code> - 鼠标移入</p>
</li>
<li><p><code>mouseleave</code> - 鼠标移除</p>
</li>
<li><p><code>mousemove</code> - 鼠标在 DOM 内移动</p>
</li>
<li><p><code>hover</code> - <code>mouseenter</code> + <code>mouseleave</code></p>
</li>
<li><p><code>keydown</code> - 键盘按下</p>
</li>
<li><p><code>keyup</code> - 键盘松开</p>
</li>
<li><p><code>keypress</code> - 按一次键触发</p>
</li>
<li><p><code>focus</code> - DOM 获得焦点</p>
</li>
<li><p><code>blur</code> - DOM 失去焦点</p>
</li>
<li><p><code>change</code> - DOM 内容变更</p>
</li>
<li><p><code>submit</code> - form 提交</p>
</li>
<li><p><code>ready</code> - 页面载入并且 DOM 树初始化后 仅作用于 document 对象</p>
<p>  <code>$(document).ready(function() {...});</code><br>  简化后：<br>  <code>$(function() {...});</code></p>
</li>
<li><p><code>off(&#39;click&#39;, &lt;functionName&gt;)</code> 取消事件绑定</p>
</li>
</ul>
<h3 id="动画效果"><a href="#动画效果" class="headerlink" title="动画效果"></a>动画效果</h3><ul>
<li><p><code>show(&#39;slow&#39;) / hide(&#39;slow&#39;) / toogle(&#39;slow&#39;)</code> - 左上角缓慢收缩</p>
</li>
<li><p><code>slideUp(&#39;slow&#39;) / SlideDown(&#39;slow&#39;) / slideToogle(&#39;slow&#39;)</code> - 垂直缓慢收缩</p>
</li>
<li><p><code>fadeIn(&#39;slow&#39;) / fadeOut(&#39;slow&#39;) / fadeToggle(&#39;slow&#39;)</code> - 淡入淡出</p>
</li>
<li><p><code>animate()</code> - 自定义效果</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#id'</span>).animate(&#123;</span><br><span class="line">    opacity: <span class="number">0.25</span>,</span><br><span class="line">    width: <span class="number">0</span>px;</span><br><span class="line">    height: <span class="number">0</span>px;</span><br><span class="line">&#125;, <span class="number">1000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">'Complete'</span>); &#125;).delay(<span class="number">1000</span>).animate(...);</span><br></pre></td></tr></table></figure>

<p>  可以使用 <code>delay()</code> 实现动画的暂停。</p>
</li>
</ul>
<h3 id="AJAX-1"><a href="#AJAX-1" class="headerlink" title="AJAX"></a>AJAX</h3><ul>
<li><p><code>$.ajax(async, method, contentType, data, headers, dataType)</code></p>
</li>
<li><p><code>$.ajax(async, method, contentType, data, headers, dataType, jsonp:&#39;callback&#39;, jsonpCallback:&#39;callbackFunction&#39;, success: function(data){...})</code></p>
</li>
<li><p><code>$.get(url)</code></p>
</li>
<li><p><code>$.post(url, data)</code></p>
</li>
<li><p><code>$.getJSON(url)</code></p>
</li>
</ul>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><ol>
<li>使用 <code>$.fn</code> 绑定函数</li>
<li>使用 <code>return this</code> 实现链式调用</li>
<li>插件有默认值，绑定在 <code>$.fn.&lt;pluginName&gt;.defaults</code> 上</li>
<li>用户在调用时可传入参数以覆盖默认值</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.fn.&lt;pluginName&gt; = <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bgcolor = options &amp;&amp; options.bgcolor || <span class="string">'#FFFFFF'</span>;</span><br><span class="line">    <span class="keyword">this</span>.css(<span class="string">'background'</span>, bgcolor)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>extend(target, obj1, obj2, ...)</code> 会将靠后对象的值合并到第一个 target 中, 越往后面的对象优先级越高；</p>
<p><code>extend({}, $.fn.&lt;pluginName&gt;.defaults, options)</code></p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>使用 <code>try {...} catch {...} finally {...}</code> 捕获</p>
<blockquote>
<p>注意：异步操作时的异常无法在调用处捕获，同样，对于控件的事件处理，在绑定事件的代码处无法捕获事件处理函数的异常。</p>
</blockquote>
<h2 id="unerscore"><a href="#unerscore" class="headerlink" title="unerscore"></a>unerscore</h2><p>与 jQuery 类似，提供一套完善的 API, 绑定到 <code>_</code> 变量上。</p>
<h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><h4 id="map-filter"><a href="#map-filter" class="headerlink" title="map/filter"></a>map/filter</h4><p>类似于 Array 的 <code>map/filter</code> 方法</p>
<ul>
<li><code>_.map(object, function(value, key) {...});</code></li>
<li><code>_.mapObject(object, function(value, key) {...});</code></li>
<li><code>_.filter(object, function(value, key) {...});</code></li>
</ul>
<h4 id="every-some"><a href="#every-some" class="headerlink" title="every/some"></a>every/some</h4><p>集合中元素都满足情况，<code>_.every()</code> 返回 <code>true</code>, 集合中部分元素满足情况， <code>_.some()</code> 返回 <code>true</code></p>
<ul>
<li><code>_.every([1, 4, 7, -3, -9], (x) =&gt; x &gt; 0); // false</code></li>
<li><code>_.some([1, 4, 7, -3, -9], (x) =&gt; x &gt; 0); // true</code></li>
</ul>
<h4 id="max-min"><a href="#max-min" class="headerlink" title="max/min"></a>max/min</h4><p>集合时 Object，会忽略掉 key，只比较 value</p>
<p><code>_.max({ a: 1, b: 2, c: 3 }); // 3</code></p>
<h4 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h4><p><code>_.groupBy([1, 2, 3, 4, 5], (x) =&gt; { if(x&lt;3) return &#39;small&#39;; else return &#39;big&#39; });</code></p>
<p>更多 <a href="https://underscorejs.org/" target="_blank" rel="noopener">underscrore 方法</a>。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://v-tawe.github.io/2019/09/16/study-notes/javascript/" data-id="ck0mm9s6f000lnghqnv4ae2pr"
         class="article-share-link">Share</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>

  </div>

  
    
  <nav class="article-nav">
    
      <a href="/2019/09/17/study-notes/sql/" class="article-nav-link">
        <strong class="article-nav-caption">Newer posts</strong>
        <div class="article-nav-title">
          
            SQL 学习笔记
          
        </div>
      </a>
    
    
      <a href="/2019/09/16/study-notes/git/" class="article-nav-link">
        <strong class="article-nav-caption">Olde posts</strong>
        <div class="article-nav-title">Git 学习笔记</div>
      </a>
    
  </nav>


  

  
    
  <div class="gitalk" id="gitalk-container"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: '6ebde0f637818be095cd',
      clientSecret: 'cbe68a3c54887cd97f7357cfdc5b861be6ce3b2b',
      repo: 'gitalk',
      owner: 'v-tawe',
      //admin: "v-tawe",
      admin: ['v-tawe'],
      // id: location.pathname,      // Ensure uniqueness and length less than 50
      id: md5(location.pathname),
      //labels: "",
      //perPage: '',
      //pagerDirection: '',
      //createIssueManually: '',
      //distractionFreeMode: ''
      distractionFreeMode: false
    })

  gitalk.render('gitalk-container')
  </script>

  

  <!-- 
    <div id="gitalk-container"></div>
    
  <div class="gitalk" id="gitalk-container"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: '6ebde0f637818be095cd',
      clientSecret: 'cbe68a3c54887cd97f7357cfdc5b861be6ce3b2b',
      repo: 'gitalk',
      owner: 'v-tawe',
      //admin: "v-tawe",
      admin: ['v-tawe'],
      // id: location.pathname,      // Ensure uniqueness and length less than 50
      id: md5(location.pathname),
      //labels: "",
      //perPage: '',
      //pagerDirection: '',
      //createIssueManually: '',
      //distractionFreeMode: ''
      distractionFreeMode: false
    })

  gitalk.render('gitalk-container')
  </script>

   -->

</article>



</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2019 David&#39;s Blog</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>

<aside class="sidebar sidebar-specter">
  
    <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="David&#39;s Blog"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">归档</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/categories">分类</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/tags">标签</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
  </aside>
  <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/tocbot.min.js"></script>
  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>


<script src="/js/ocean.js"></script>

</body>
</html>